# Telegram bot для оповещения об актуальном статусе проверки дз.

## Описание

- Бот раз в 10 минут опрашивать API сервиса Практикум.Домашка и проверять статус отправленной на ревью домашней работы.
- При обновлении статуса анализировать ответ API и отправлять вам соответствующее уведомление в Telegram.
- Логирует свою работу и сообщает вам о важных проблемах сообщением в Telegram.

## Структура программы

- Функция main(): 
В ней описана основная логика работы программы. Все остальные функции запускаются из неё. Последовательность действий следующая:

    :one: Сделать запрос к API.
    
    :two: Проверить ответ.
    
    :three: Если есть обновления — получить статус работы из обновления и отправить сообщение в Telegram.
    
    :four: Подождать некоторое время и вернуться в пункт 1.

- Функция check_tokens() проверяет доступность переменных окружения, которые необходимы для работы программы. Если отсутствует хотя бы одна переменная окружения, бот прекращает работу.

- Функция get_api_answer() делает запрос к единственному эндпоинту API-сервиса. В качестве параметра в функцию передается временная метка. В случае успешного запроса должна вернуть ответ API, приведя его из формата JSON к типам данных Python.

- Функция check_response() проверяет ответ API на соответствие документации. В качестве параметра функция получает ответ API, приведенный к типам данных Python.

- Функция parse_status() извлекает из информации о конкретной домашней работе статус этой работы. В качестве параметра функция получает только один элемент из списка домашних работ. В случае успеха, функция возвращает подготовленную для отправки в Telegram строку, содержащую один из вердиктов словаря HOMEWORK_VERDICTS.

- Функция send_message() отправляет сообщение в Telegram чат, определяемый переменной окружения TELEGRAM_CHAT_ID. Принимает на вход два параметра: экземпляр класса Bot и строку с текстом сообщения.

## Логирование

Каждое сообщение в журнале логов состоит из:
- даты и времени события,
- уровня важности события,
- описания события.

Например: 
```
2021-10-09 15:34:45,150 [ERROR] Сбой в работе программы: Эндпоинт https://practicum.yandex.ru/api/user_api/homework_statuses/111 недоступен. Код ответа API: 404
2021-10-09 15:34:45,355 [DEBUG] Бот отправил сообщение "Сбой в работе программы: Эндпоинт [https://practicum.yandex.ru/api/user_api/homework_statuses/](https://practicum.yandex.ru/api/user_api/homework_statuses/) недоступен. Код ответа API: 404"
```
или
```
2021-10-09 16:19:13,149 [CRITICAL] Отсутствует обязательная переменная окружения: 'TELEGRAM_CHAT_ID'
Программа принудительно остановлена.
```
Логируются такие события как:
:one: Отсутствие обязательных переменных окружения во время запуска бота (уровень CRITICAL).

:two: Удачная отправка любого сообщения в Telegram (уровень DEBUG).

:three: Сбой при отправке сообщения в Telegram (уровень ERROR).

:four: Недоступность эндпоинта https://practicum.yandex.ru/api/user_api/homework_statuses/ (уровень ERROR).

:five: Любые другие сбои при запросе к эндпоинту (уровень ERROR).

:six: Отсутствие ожидаемых ключей в ответе API (уровень ERROR).

:seven: Неожиданный статус домашней работы, обнаруженный в ответе API (уровень ERROR).

:eight: Отсутствие в ответе новых статусов (уровень DEBUG).

## Используемы технологии

- Python 3.7
- Django Framework 3.0.5

### Автор проекта:
- Начинающий разработчик Евгений Бузуев. С моими другими работами вы можете ознакомится по ссылке: https://github.com/SurfimChilim
